<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ThangLungLen</title>
    <link href="./style.css" rel="stylesheet" />
    <script src="./main.js" defer></script>
    <script src="./tf.min.js"></script>
    <script src="./pose-detection.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <!--gắn link font roboto của google vào để hiện tiếng việt cho rõ-->
  </head>
  <body>
    <h2 id ="tenapp" style="z-index: 999">Trường THPT Kinh Môn: Hệ thống giám sát tư thế</h2>
    <button id="keypoint-toggle"></button>
    <dialog id="lich-su-gu">
      <button id="close-lichsugu">X</button>
      <div id="thongkegu">Lịch sử gù sẽ hiển thị ở đây...</div>

      <!-- Thêm feedback ngay dưới thống kê -->
      <div id="feedback" class="feedback-box"></div>
    </dialog>

    <canvas id="canvas"></canvas>
    <video id="webcam"></video>
    <div id="statusDiv">Ngồi đúng tư thế và bấm bắt đầu theo dõi</div>
    <div class="button-container">
      <button class="button" id="nutbatdau"></button>
      <button class="button" id="huongdan"></button>
      <button class="button" id="lichsugu"></button>
    </div>

    <dialog class="huongdan" id="huongdan-dialog">
      <button id="close-huongdan">X</button>
      <div id="chuyentrang">
        <button
          class="button"
          id="hocsinh"
          onclick="showPage('huongdanhocsinh')"
        >
          Dành cho học sinh
        </button>
        <button
          class="button"
          id="phuhuynh"
          onclick="showPage('huongdanphuhuynh')"
        >
          Dành cho phụ huynh
        </button>
      </div>
      <div class="page" id="huongdanhocsinh">
        <img src="assets/huongdan.jpg" alt="huongdan" /><!-- Bước 1 -->
        <div class="buoc">
          <h2 class="tieude">Bước 1: Chuẩn bị</h2>
          <p class="noidung">
            - Ngồi thẳng lưng, hai chân đặt vuông góc chạm sàn.<br />
            - Đặt camera đối diện, sao cho thấy rõ mặt và vai, đủ sáng.<br />
          </p>
        </div>

        <!-- Bước 2 -->
        <div class="buoc">
          <h2 class="tieude">Bước 2: Lưu tư thế chuẩn</h2>
          <p class="noidung">
            - Ngồi vào tư thế đúng (ngực cách bàn ~½ gang tay, mắt cách vở ~1,5
            gang tay).<br />
            - Lưng hơi tựa vào ghế, không ngả quá nhiều.<br />
            - Giữ nguyên tư thế lưng, không di chuyển.<br />
            - Nhấn nút <b>“Bắt đầu theo dõi”</b> để lưu lại tư thế chuẩn.
          </p>

          <p style="color: red">
            (Lưu ý: Mỗi một lần sử dụng ứng dụng cần tạo một tư thế đúng, ứng
            dụng không lưu tư thế đúng cho mọi lần sử dụng.)
          </p>
          <p></p>
        </div>
      </div>
      <div class="page" id="huongdanphuhuynh">
        <img src="assets/huongdan2.jpg" alt="huongdan2" />
        <div class="buoc">
          <h2 class="tieude">Bước 1</h2>
          <div class="noidung">Hỗ trợ trẻ ngồi đúng tư thế học</div>
        </div>
        <div class="buoc">
          <h2 class="tieude">Bước 2</h2>
          <div class="noidung">
            Căn chỉnh để cả đầu và vai của trẻ đều ở trong khung camera
          </div>
        </div>
        <div class="buoc">
          <h2 class="tieude">Bước 3</h2>
          <div class="noidung">
            Bấm "Bắt đầu theo dõi", phụ huynh nên tránh mặt khỏi camera để ứng
            dụng có thể nhận diện được trẻ là đối tượng để theo dõi tư thế. Nếu
            ứng dụng hiển thị "Tư thế đúng" thì có nghĩa là ứng dụng đã lưu được
            tư thế đúng của trẻ. Lúc này cha mẹ có thể yên tâm để con ngồi học
            cùng app.
          </div>
        </div>
        <p style="color: red">
          (Lưu ý: Mỗi một lần sử dụng ứng dụng cần tạo một tư thế đúng, ứng dụng
          không lưu tư thế đúng cho mọi lần sử dụng.)
        </p>
      </div>
    </dialog>
    <audio id="taibanlech" src="./assets/taibanlech.mp3"></audio>
    <audio id="goccothaydoi" src="./assets/goccobanthaydoi.mp3"></audio>
    <audio id="daubancui" src="./assets/daubancuisauqua.mp3"></audio>

    <!-- Popup nhắc ngồi lâu đặt ở đây -->
    <div id="popup-ngoi-lau" class="popup">
      <div class="popup-content">
        <p>
          ⏰ Bạn đã ngồi học hơn 1 tiếng rồi. Hãy đứng dậy, đi lại và vươn vai
          nhé!
        </p>
        <button id="dong-popup">Đã hiểu</button>
      </div>
    </div>
  </body>
</html>
